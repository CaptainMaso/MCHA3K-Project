<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="8,50" id="srcline50"> 50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,51" id="srcline51"> 51</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S54T10U466">Theta</span>, <span class="var type1" id="S55T10U467">dTheta</span>, <span class="var type1" id="S56T13U468">Bias</span>, <span class="var type1" id="S57T34U469">P</span>] = GyroCorrection(<span class="var type1" id="S58T4U472">Theta_p</span>, <span class="var type1" id="S59T4U473">dTheta_p</span>, <span class="var type1" id="S60T5U474">Bias_p</span>, <span class="var type1" id="S61T6U475">P_p</span>, <span class="var type1" id="S62T4U476">yw</span>, <span class="var type1" id="S63T8U477">rw</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="8,52" id="srcline52"> 52</a></span><span class="line">    <span class="mxinfo " id="T3:U11"><span class="var type1" id="S64T221U480">fm</span> = <span class="mxinfo " id="T3:U13"><span class="fcn" id="F37N10:B482">get_fimath</span>()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,53" id="srcline53"> 53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,54" id="srcline54"> 54</a></span><span class="line">    <span class="keyword">global</span> <span class="var type0" id="S66T0U484">T</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,55" id="srcline55"> 55</a></span><span class="line">    <span class="mxinfo " id="T14:U14"><span class="var type1" id="S67T14U487">Pbb_p</span> = <span class="mxinfo " id="T14:U16">fi(<span class="mxinfo " id="T246:U17"><span class="var type1" id="S61T6U491">P_p</span>(<span class="mxinfo " id="T223:U19">3</span>,<span class="mxinfo " id="T223:U20">3</span>)</span>, 0, 16, 13, <span class="var type1" id="S64T221U497">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,56" id="srcline56"> 56</a></span><span class="line">    <span class="mxinfo " id="T13:U22"><span class="var type1" id="S69T13U500">Ptb_p</span> = <span class="mxinfo " id="T13:U24">fi(<span class="mxinfo " id="T246:U25"><span class="var type1" id="S61T6U504">P_p</span>(<span class="mxinfo " id="T223:U27">2</span>,<span class="mxinfo " id="T223:U28">3</span>)</span>, 1, 16, 9, <span class="var type1" id="S64T221U510">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,57" id="srcline57"> 57</a></span><span class="line">    <span class="mxinfo " id="T15:U30"><span class="var type1" id="S70T15U513">Ptt_p</span> = <span class="mxinfo " id="T15:U32">fi(<span class="mxinfo " id="T246:U33"><span class="var type1" id="S61T6U517">P_p</span>(<span class="mxinfo " id="T223:U35">2</span>,<span class="mxinfo " id="T223:U36">2</span>)</span>, 0, 16, 6, <span class="var type1" id="S64T221U523">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,58" id="srcline58"> 58</a></span><span class="line">    <span class="mxinfo " id="T16:U38"><span class="var type1" id="S71T16U526">Pwb_p</span> = <span class="mxinfo " id="T16:U40">fi(<span class="mxinfo " id="T246:U41"><span class="var type1" id="S61T6U530">P_p</span>(<span class="mxinfo " id="T223:U43">1</span>,<span class="mxinfo " id="T223:U44">3</span>)</span>, 1, 16, 12, <span class="var type1" id="S64T221U536">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,59" id="srcline59"> 59</a></span><span class="line">    <span class="mxinfo " id="T17:U46"><span class="var type1" id="S72T17U539">Pwt_p</span> = <span class="mxinfo " id="T17:U48">fi(<span class="mxinfo " id="T246:U49"><span class="var type1" id="S61T6U543">P_p</span>(<span class="mxinfo " id="T223:U51">1</span>,<span class="mxinfo " id="T223:U52">2</span>)</span>, 0, 16, 10, <span class="var type1" id="S64T221U549">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,60" id="srcline60"> 60</a></span><span class="line">    <span class="mxinfo " id="T14:U54"><span class="var type1" id="S73T14U552">Pww_p</span> = <span class="mxinfo " id="T14:U56">fi(<span class="mxinfo " id="T246:U57"><span class="var type1" id="S61T6U556">P_p</span>(<span class="mxinfo " id="T223:U59">1</span>,<span class="mxinfo " id="T223:U60">1</span>)</span>, 0, 16, 13, <span class="var type1" id="S64T221U562">fm</span>)</span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="8,61" id="srcline61"> 61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="8,62" id="srcline62"> 62</a></span><span class="line">    <span class="comment">%% Kalman Gain Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,63" id="srcline63"> 63</a></span><span class="line">    <span class="mxinfo " id="T49:U62"><span class="var type1" id="S74T49U565">kw</span> = <span class="mxinfo " id="T49:U64">fi(<span class="mxinfo " id="T45:U65"><span class="fcn" id="F481N7:B569">fi_div</span>((<span class="mxinfo " id="T40:U66"><span class="var type1" id="S73T14U572">Pww_p</span> + <span class="var type1" id="S71T16U573">Pwb_p</span></span>), (<span class="mxinfo " id="T41:U69"><span class="mxinfo " id="T62:U70"><span class="mxinfo " id="T63:U71"><span class="var type1" id="S73T14U578">Pww_p</span> + <span class="mxinfo " id="T64:U73"><span class="mxinfo " id="T328:U74">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U586">fm</span>)</span>*<span class="var type1" id="S71T16U587">Pwb_p</span></span></span> + <span class="var type1" id="S67T14U588">Pbb_p</span></span> + <span class="mxinfo " id="T8:U78"><span class="fcn" id="F411N7:B590">fi_div</span>(<span class="var type1" id="S63T8U591">rw</span>, <span class="var type2" id="S66T1V1U592">T</span>)</span></span>))</span>, 0, 16, 16, <span class="var type1" id="S64T221U596">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T65:U82"><span class="var type1" id="S76T65U599">kt</span> = <span class="mxinfo " id="T65:U84">fi(<span class="mxinfo " id="T45:U85"><span class="fcn" id="F513N7:B603">fi_div</span>((<span class="mxinfo " id="T47:U86"><span class="var type1" id="S72T17U606">Pwt_p</span> + <span class="var type1" id="S69T13U607">Ptb_p</span></span>), (<span class="mxinfo " id="T41:U89"><span class="mxinfo " id="T62:U90"><span class="mxinfo " id="T63:U91"><span class="var type1" id="S73T14U612">Pww_p</span> + <span class="mxinfo " id="T64:U93"><span class="mxinfo " id="T328:U94">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U620">fm</span>)</span>*<span class="var type1" id="S71T16U621">Pwb_p</span></span></span> + <span class="var type1" id="S67T14U622">Pbb_p</span></span> + <span class="mxinfo " id="T8:U98"><span class="fcn" id="F411N7:B624">fi_div</span>(<span class="var type1" id="S63T8U625">rw</span>, <span class="var type1" id="S66T1U626">T</span>)</span></span>))</span>, 1, 16, 16, <span class="var type1" id="S64T221U630">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,65" id="srcline65"> 65</a></span><span class="line">    <span class="mxinfo " id="T55:U102"><span class="var type1" id="S77T55U633">kb</span> = <span class="mxinfo " id="T55:U104">fi(<span class="mxinfo " id="T45:U105"><span class="fcn" id="F481N7:B637">fi_div</span>((<span class="mxinfo " id="T40:U106"><span class="var type1" id="S71T16U640">Pwb_p</span> + <span class="var type1" id="S67T14U641">Pbb_p</span></span>), (<span class="mxinfo " id="T41:U109"><span class="mxinfo " id="T62:U110"><span class="mxinfo " id="T63:U111"><span class="var type1" id="S73T14U646">Pww_p</span> + <span class="mxinfo " id="T64:U113"><span class="mxinfo " id="T328:U114">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U654">fm</span>)</span>*<span class="var type1" id="S71T16U655">Pwb_p</span></span></span> + <span class="var type1" id="S67T14U656">Pbb_p</span></span> + <span class="mxinfo " id="T8:U118"><span class="fcn" id="F411N7:B658">fi_div</span>(<span class="var type1" id="S63T8U659">rw</span>, <span class="var type1" id="S66T1U660">T</span>)</span></span>))</span>, 0, 16, 20, <span class="var type1" id="S64T221U664">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,66" id="srcline66"> 66</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="8,67" id="srcline67"> 67</a></span><span class="line">    <span class="comment">%% State Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,68" id="srcline68"> 68</a></span><span class="line">    <span class="mxinfo " id="T10:U122"><span class="var type1" id="S55T10U667">dTheta</span> = <span class="mxinfo " id="T10:U124">fi(<span class="mxinfo " id="T66:U125"><span class="var type1" id="S59T4U671">dTheta_p</span> + <span class="mxinfo " id="T67:U127"><span class="var type1" id="S74T49U673">kw</span>*(<span class="mxinfo " id="T68:U129"><span class="mxinfo " id="T69:U130"><span class="var type1" id="S62T4U677">yw</span>-<span class="var type1" id="S59T4U678">dTheta_p</span></span>-<span class="var type1" id="S60T5U679">Bias_p</span></span>)</span></span>, 1, 16, 4, <span class="var type1" id="S64T221U683">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,69" id="srcline69"> 69</a></span><span class="line">    <span class="mxinfo " id="T10:U135"><span class="var type1" id="S54T10U686">Theta</span> =  <span class="mxinfo " id="T10:U137">fi(<span class="mxinfo " id="T66:U138"><span class="var type1" id="S58T4U690">Theta_p</span>  + <span class="mxinfo " id="T67:U140"><span class="var type1" id="S76T65U692">kt</span>*(<span class="mxinfo " id="T68:U142"><span class="mxinfo " id="T69:U143"><span class="var type1" id="S62T4U696">yw</span>-<span class="var type1" id="S59T4U697">dTheta_p</span></span>-<span class="var type1" id="S60T5U698">Bias_p</span></span>)</span></span>, 1, 16, 4, <span class="var type1" id="S64T221U702">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,70" id="srcline70"> 70</a></span><span class="line">    <span class="mxinfo " id="T13:U148"><span class="var type1" id="S56T13U705">Bias</span> =   <span class="mxinfo " id="T13:U150">fi(<span class="mxinfo " id="T70:U151"><span class="var type1" id="S60T5U709">Bias_p</span> + <span class="mxinfo " id="T71:U153"><span class="var type1" id="S77T55U711">kb</span>*(<span class="mxinfo " id="T68:U155"><span class="mxinfo " id="T69:U156"><span class="var type1" id="S62T4U715">yw</span>-<span class="var type1" id="S59T4U716">dTheta_p</span></span>-<span class="var type1" id="S60T5U717">Bias_p</span></span>)</span></span>, 1, 16, 9, <span class="var type1" id="S64T221U721">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,71" id="srcline71"> 71</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="8,72" id="srcline72"> 72</a></span><span class="line">    <span class="comment">%% Covariance Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,73" id="srcline73"> 73</a></span><span class="line">    <span class="mxinfo " id="T14:U161"><span class="var type1" id="S78T14U724">Pww</span> = <span class="mxinfo " id="T14:U163">fi(<span class="mxinfo  fixpt" id="T72:U164"><span class="mxinfo  fixpt" id="T73:U165"><span class="mxinfo  fixpt" id="T74:U166"><span class="mxinfo  fixpt" id="T75:U167"><span class="mxinfo " id="T76:U168">(<span class="mxinfo " id="T77:U169"><span class="mxinfo " id="T52:U170"><span class="fcn" id="F585N8:B735">fi_signed</span>(<span class="var type1" id="S74T49U736">kw</span>)</span> - <span class="mxinfo " id="T328:U172">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U743">fm</span>)</span></span>)^2</span>*<span class="var type1" id="S73T14U745">Pww_p</span></span> + <span class="mxinfo  fixpt" id="T78:U175">(<span class="mxinfo " id="T79:U176"><span class="mxinfo " id="T80:U177"><span class="mxinfo " id="T328:U178">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U756">fm</span>)</span>*<span class="var type1" id="S74T49U757">kw</span></span>*(<span class="mxinfo " id="T77:U181"><span class="mxinfo " id="T52:U182"><span class="fcn" id="F585N8:B761">fi_signed</span>(<span class="var type1" id="S74T49U762">kw</span>)</span> - <span class="mxinfo " id="T328:U184">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U769">fm</span>)</span></span>)</span>)*<span class="var type1" id="S71T16U770">Pwb_p</span></span></span> + <span class="mxinfo " id="T81:U187"><span class="mxinfo " id="T26:U188"><span class="var type1" id="S74T49U773">kw</span>^2</span>*<span class="var type1" id="S67T14U775">Pbb_p</span></span></span> + <span class="mxinfo " id="T53:U191"><span class="fcn" id="F700N7:B777">fi_div</span>((<span class="mxinfo " id="T53:U192"><span class="mxinfo " id="T26:U193"><span class="var type1" id="S74T49U781">kw</span>^2</span>*<span class="var type1" id="S63T8U783">rw</span></span>), <span class="var type1" id="S66T1U784">T</span>)</span></span>, 0, 16, 13, <span class="var type1" id="S64T221U788">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,74" id="srcline74"> 74</a></span><span class="line">    <span class="mxinfo " id="T17:U198"><span class="var type1" id="S80T17U791">Pwt</span> = <span class="mxinfo " id="T17:U200">fi(<span class="mxinfo  fixpt" id="T82:U201"><span class="mxinfo  fixpt" id="T83:U202"><span class="mxinfo " id="T84:U203"><span class="mxinfo " id="T85:U204"><span class="mxinfo " id="T86:U205"><span class="mxinfo " id="T87:U206">(<span class="mxinfo " id="T88:U207"><span class="var type1" id="S76T65U802">kt</span>*(<span class="mxinfo " id="T77:U209"><span class="mxinfo " id="T52:U210"><span class="fcn" id="F585N8:B806">fi_signed</span>(<span class="var type1" id="S74T49U807">kw</span>)</span> - <span class="mxinfo " id="T328:U212">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U814">fm</span>)</span></span>)</span>)*<span class="var type1" id="S73T14U815">Pww_p</span></span> + <span class="mxinfo " id="T89:U215">(<span class="mxinfo " id="T90:U216"><span class="mxinfo " id="T328:U217">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U825">fm</span>)</span> - <span class="var type1" id="S74T49U826">kw</span></span>)*<span class="var type1" id="S72T17U827">Pwt_p</span></span></span> + <span class="mxinfo " id="T91:U221">(<span class="mxinfo " id="T92:U222"><span class="mxinfo " id="T93:U223"><span class="var type1" id="S76T65U832">kt</span>*<span class="var type1" id="S74T49U833">kw</span></span> + <span class="mxinfo " id="T88:U226"><span class="var type1" id="S76T65U835">kt</span>*(<span class="mxinfo " id="T77:U228"><span class="mxinfo " id="T52:U229"><span class="fcn" id="F585N8:B839">fi_signed</span>(<span class="var type1" id="S74T49U840">kw</span>)</span> - <span class="mxinfo " id="T328:U231">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U847">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T16U848">Pwb_p</span></span></span> + <span class="mxinfo " id="T94:U234">(<span class="mxinfo " id="T52:U235"><span class="fcn" id="F776N9:B852">fi_uminus</span>(<span class="var type1" id="S74T49U853">kw</span>)</span>)*<span class="var type1" id="S69T13U854">Ptb_p</span></span></span> + <span class="mxinfo " id="T95:U238">(<span class="mxinfo " id="T93:U239"><span class="var type1" id="S76T65U858">kt</span>*<span class="var type1" id="S74T49U859">kw</span></span>)*<span class="var type1" id="S67T14U860">Pbb_p</span></span></span> + <span class="mxinfo " id="T54:U243"><span class="fcn" id="F815N7:B862">fi_div</span>((<span class="mxinfo " id="T54:U244"><span class="mxinfo " id="T93:U245"><span class="var type1" id="S76T65U866">kt</span>*<span class="var type1" id="S74T49U867">kw</span></span>*<span class="var type1" id="S63T8U868">rw</span></span>), <span class="var type1" id="S66T1U869">T</span>)</span></span>, 0, 16, 10, <span class="var type1" id="S64T221U873">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,75" id="srcline75"> 75</a></span><span class="line">    <span class="mxinfo " id="T16:U251"><span class="var type1" id="S82T16U876">Pwb</span> = <span class="mxinfo " id="T16:U253">fi(<span class="mxinfo  fixpt" id="T96:U254"><span class="mxinfo  fixpt" id="T97:U255"><span class="mxinfo  fixpt" id="T98:U256"><span class="mxinfo " id="T99:U257">(<span class="mxinfo " id="T100:U258"><span class="var type1" id="S77T55U885">kb</span>*(<span class="mxinfo " id="T77:U260"><span class="mxinfo " id="T52:U261"><span class="fcn" id="F585N8:B889">fi_signed</span>(<span class="var type1" id="S74T49U890">kw</span>)</span> - <span class="mxinfo " id="T328:U263">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U897">fm</span>)</span></span>)</span>)*<span class="var type1" id="S73T14U898">Pww_p</span></span> + <span class="mxinfo  fixpt" id="T101:U266">(<span class="mxinfo " id="T102:U267"><span class="mxinfo " id="T31:U268"><span class="var type1" id="S77T55U903">kb</span>*<span class="var type1" id="S74T49U904">kw</span></span> + <span class="mxinfo " id="T103:U271">(<span class="mxinfo " id="T104:U272"><span class="mxinfo " id="T58:U273"><span class="fcn" id="F847N8:B909">fi_signed</span>(<span class="var type1" id="S77T55U910">kb</span>)</span> - <span class="mxinfo " id="T328:U275">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U917">fm</span>)</span></span>)*(<span class="mxinfo " id="T77:U277"><span class="mxinfo " id="T52:U278"><span class="fcn" id="F585N8:B921">fi_signed</span>(<span class="var type1" id="S74T49U922">kw</span>)</span> - <span class="mxinfo " id="T328:U280">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U929">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T16U930">Pwb_p</span></span></span> + <span class="mxinfo " id="T105:U283">(<span class="mxinfo " id="T106:U284"><span class="var type1" id="S74T49U934">kw</span>*(<span class="mxinfo " id="T104:U286"><span class="mxinfo " id="T58:U287"><span class="fcn" id="F847N8:B938">fi_signed</span>(<span class="var type1" id="S77T55U939">kb</span>)</span> - <span class="mxinfo " id="T328:U289">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U946">fm</span>)</span></span>)</span>)*<span class="var type1" id="S67T14U947">Pbb_p</span></span></span> + <span class="mxinfo " id="T59:U292"><span class="fcn" id="F916N7:B949">fi_div</span>((<span class="mxinfo " id="T59:U293"><span class="mxinfo " id="T31:U294"><span class="var type1" id="S77T55U953">kb</span>*<span class="var type1" id="S74T49U954">kw</span></span>*<span class="var type1" id="S63T8U955">rw</span></span>), <span class="var type1" id="S66T1U956">T</span>)</span></span>, 1, 16, 12, <span class="var type1" id="S64T221U960">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,76" id="srcline76"> 76</a></span><span class="line">    <span class="mxinfo " id="T15:U300"><span class="var type1" id="S83T15U963">Ptt</span> = <span class="mxinfo " id="T15:U302">fi(<span class="mxinfo  fixpt" id="T82:U303"><span class="mxinfo  fixpt" id="T83:U304"><span class="mxinfo " id="T84:U305"><span class="mxinfo " id="T85:U306"><span class="mxinfo " id="T107:U307"><span class="mxinfo " id="T108:U308"><span class="mxinfo " id="T95:U309"><span class="mxinfo " id="T93:U310"><span class="var type1" id="S76T65U974">kt</span>^2</span>*<span class="var type1" id="S73T14U976">Pww_p</span></span> + <span class="mxinfo " id="T109:U313">(<span class="mxinfo " id="T110:U314"><span class="mxinfo " id="T450:U315">fi(-2, 1, 8, 0, <span class="var type1" id="S64T221U987">fm</span>)</span>*<span class="var type1" id="S76T65U988">kt</span></span>)*<span class="var type1" id="S72T17U989">Pwt_p</span></span></span> + <span class="mxinfo " id="T111:U319">(<span class="mxinfo " id="T112:U320"><span class="mxinfo " id="T328:U321">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U999">fm</span>)</span>*<span class="mxinfo " id="T93:U323"><span class="var type1" id="S76T65U1001">kt</span>^2</span></span>)*<span class="var type1" id="S71T16U1003">Pwb_p</span></span></span> + <span class="var type1" id="S70T15U1004">Ptt_p</span></span> + <span class="mxinfo " id="T113:U327">(<span class="mxinfo " id="T110:U328"><span class="mxinfo " id="T450:U329">fi(-2, 1, 8, 0, <span class="var type1" id="S64T221U1015">fm</span>)</span>*<span class="var type1" id="S76T65U1016">kt</span></span>)*<span class="var type1" id="S69T13U1017">Ptb_p</span></span></span> + <span class="mxinfo " id="T95:U333"><span class="mxinfo " id="T93:U334"><span class="var type1" id="S76T65U1020">kt</span>^2</span>*<span class="var type1" id="S67T14U1022">Pbb_p</span></span></span> + <span class="mxinfo " id="T54:U337"><span class="fcn" id="F815N7:B1024">fi_div</span>((<span class="mxinfo " id="T54:U338"><span class="mxinfo " id="T93:U339"><span class="var type1" id="S76T65U1028">kt</span>^2</span>*<span class="var type1" id="S63T8U1030">rw</span></span>), <span class="var type1" id="S66T1U1031">T</span>)</span></span>, 0, 16, 6, <span class="var type1" id="S64T221U1035">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,77" id="srcline77"> 77</a></span><span class="line">    <span class="mxinfo " id="T13:U344"><span class="var type1" id="S84T13U1038">Ptb</span> = <span class="mxinfo " id="T13:U346">fi(<span class="mxinfo  fixpt" id="T114:U347"><span class="mxinfo  fixpt" id="T115:U348"><span class="mxinfo  fixpt" id="T116:U349"><span class="mxinfo  fixpt" id="T117:U350"><span class="mxinfo " id="T118:U351"><span class="mxinfo " id="T119:U352">(<span class="mxinfo " id="T120:U353"><span class="var type1" id="S77T55U1049">kb</span>*<span class="var type1" id="S76T65U1050">kt</span></span>)*<span class="var type1" id="S73T14U1051">Pww_p</span></span> + <span class="mxinfo " id="T121:U357">(<span class="mxinfo " id="T58:U358"><span class="fcn" id="F1018N9:B1055">fi_uminus</span>(<span class="var type1" id="S77T55U1056">kb</span>)</span>)*<span class="var type1" id="S72T17U1057">Pwt_p</span></span></span> + <span class="mxinfo " id="T122:U361">(<span class="mxinfo " id="T123:U362"><span class="mxinfo " id="T120:U363"><span class="var type1" id="S77T55U1062">kb</span>*<span class="var type1" id="S76T65U1063">kt</span></span> + <span class="mxinfo " id="T106:U366"><span class="var type1" id="S76T65U1065">kt</span>*(<span class="mxinfo " id="T104:U368"><span class="mxinfo " id="T58:U369"><span class="fcn" id="F847N8:B1069">fi_signed</span>(<span class="var type1" id="S77T55U1070">kb</span>)</span> - <span class="mxinfo " id="T328:U371">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U1077">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T16U1078">Pwb_p</span></span></span> + <span class="mxinfo " id="T124:U374">(<span class="mxinfo " id="T125:U375"><span class="mxinfo " id="T328:U376">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U1088">fm</span>)</span> - <span class="var type1" id="S77T55U1089">kb</span></span>)*<span class="var type1" id="S69T13U1090">Ptb_p</span></span></span> + <span class="mxinfo " id="T105:U380">(<span class="mxinfo " id="T106:U381"><span class="var type1" id="S76T65U1094">kt</span>*(<span class="mxinfo " id="T104:U383"><span class="mxinfo " id="T58:U384"><span class="fcn" id="F847N8:B1098">fi_signed</span>(<span class="var type1" id="S77T55U1099">kb</span>)</span> - <span class="mxinfo " id="T328:U386">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U1106">fm</span>)</span></span>)</span>)*<span class="var type1" id="S67T14U1107">Pbb_p</span></span></span> + <span class="mxinfo " id="T60:U389"><span class="fcn" id="F1091N7:B1109">fi_div</span>((<span class="mxinfo " id="T60:U390"><span class="mxinfo " id="T120:U391"><span class="var type1" id="S77T55U1113">kb</span>*<span class="var type1" id="S76T65U1114">kt</span></span>*<span class="var type1" id="S63T8U1115">rw</span></span>), <span class="var type1" id="S66T1U1116">T</span>)</span></span>, 1, 16, 9, <span class="var type1" id="S64T221U1120">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,78" id="srcline78"> 78</a></span><span class="line">    <span class="mxinfo " id="T14:U397"><span class="var type1" id="S85T14U1123">Pbb</span> = <span class="mxinfo " id="T14:U399">fi(<span class="mxinfo  fixpt" id="T126:U400"><span class="mxinfo  fixpt" id="T127:U401"><span class="mxinfo  fixpt" id="T128:U402"><span class="mxinfo " id="T129:U403"><span class="mxinfo " id="T130:U404"><span class="var type1" id="S77T55U1131">kb</span>^2</span>*<span class="var type1" id="S73T14U1133">Pww_p</span></span> + <span class="mxinfo  fixpt" id="T131:U407">(<span class="mxinfo " id="T132:U408"><span class="mxinfo " id="T133:U409"><span class="mxinfo " id="T328:U410">fi(2, 0, 8, 0, <span class="var type1" id="S64T221U1144">fm</span>)</span>*<span class="var type1" id="S77T55U1145">kb</span></span>*(<span class="mxinfo " id="T104:U413"><span class="mxinfo " id="T58:U414"><span class="fcn" id="F847N8:B1149">fi_signed</span>(<span class="var type1" id="S77T55U1150">kb</span>)</span> - <span class="mxinfo " id="T328:U416">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U1157">fm</span>)</span></span>)</span>)*<span class="var type1" id="S71T16U1158">Pwb_p</span></span></span> + <span class="mxinfo  fixpt" id="T134:U419"><span class="mxinfo " id="T135:U420">(<span class="mxinfo " id="T104:U421"><span class="mxinfo " id="T58:U422"><span class="fcn" id="F847N8:B1164">fi_signed</span>(<span class="var type1" id="S77T55U1165">kb</span>)</span> - <span class="mxinfo " id="T328:U424">fi(1, 0, 8, 0, <span class="var type1" id="S64T221U1172">fm</span>)</span></span>)^2</span>*<span class="var type1" id="S67T14U1174">Pbb_p</span></span></span> + <span class="mxinfo " id="T61:U427"><span class="fcn" id="F1191N7:B1176">fi_div</span>((<span class="mxinfo " id="T61:U428"><span class="mxinfo " id="T130:U429"><span class="var type1" id="S77T55U1180">kb</span>^2</span>*<span class="var type1" id="S63T8U1182">rw</span></span>), <span class="var type1" id="S66T1U1183">T</span>)</span></span>, 0, 16, 13, <span class="var type1" id="S64T221U1187">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,79" id="srcline79"> 79</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="8,80" id="srcline80"> 80</a></span><span class="line">    <span class="mxinfo " id="T34:U434"><span class="var type1" id="S57T34U1190">P</span> = <span class="mxinfo " id="T34:U436">fi(<span class="mxinfo " id="T34:U437">[<span class="mxinfo " id="T325:U438"><span class="mxinfo " id="T35:U439">fi(<span class="var type1" id="S78T14U1197">Pww</span>, 1, 16, 5, <span class="var type1" id="S64T221U1201">fm</span>)</span>, <span class="var type1" id="S80T17U1202">Pwt</span>, <span class="var type1" id="S82T16U1203">Pwb</span></span>; <span class="mxinfo " id="T325:U444"><span class="mxinfo " id="T35:U445">fi(<span class="var type1" id="S80T17U1207">Pwt</span>, 1, 16, 5, <span class="var type1" id="S64T221U1211">fm</span>)</span>, <span class="var type1" id="S83T15U1212">Ptt</span>, <span class="var type1" id="S84T13U1213">Ptb</span></span>; <span class="mxinfo " id="T326:U450"><span class="mxinfo " id="T13:U451">fi(<span class="var type1" id="S82T16U1217">Pwb</span>, 1, 16, 9, <span class="var type1" id="S64T221U1221">fm</span>)</span>, <span class="var type1" id="S84T13U1222">Ptb</span>, <span class="var type1" id="S85T14U1223">Pbb</span></span>]</span>, 1, 16, 5, <span class="var type1" id="S64T221U1227">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="8,81" id="srcline81"> 81</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="8,82" id="srcline82"> 82</a></span><span class="line"></span></span>
</pre>
