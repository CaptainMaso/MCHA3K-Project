<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line"><span class="keyword">function</span> [<span class="var type0" id="S16T0U66">Theta</span>, <span class="var type1" id="S17T1U67">dTheta</span>, <span class="var type1" id="S18T1U68">Bias</span>, <span class="var type0" id="S19T0U69">P</span>] = TimeUpdate(<span class="var type1" id="S20T1U72">Theta_p</span>, <span class="var type1" id="S21T1U73">dTheta_p</span>, <span class="var type1" id="S22T1U74">Bias_p</span>, <span class="var type1" id="S23T2U75">P_p</span>, <span class="var type1" id="S24T1U76">qw</span>, <span class="var type1" id="S25T1U77">qb</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">    <span class="keyword">global</span> <span class="var type0" id="S26T0U79">T</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">    <span class="comment">% State Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T1:U9"><span class="var type1" id="S17T1U82">dTheta</span> = <span class="var type1" id="S21T1U83">dTheta_p</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="var type0" id="S16T0U86">Theta</span>  = <span class="var type0" id="S26T0U89"><span class="message error" id="M16F2C">T</span></span>*<span class="var type0" id="S21T0U90">dTheta_p</span> + <span class="var type0" id="S20T0U91">Theta_p</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">    <span class="mxinfo " id="T1:U12"><span class="var type1" id="S18T1U94">Bias</span> = <span class="var type1" id="S22T1U95">Bias_p</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">    <span class="comment">% Covariance Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">    <span class="mxinfo " id="T1:U15"><span class="var type1" id="S27T1U98">Pbb_p</span> = <span class="mxinfo " id="T1:U17"><span class="var type1" id="S23T2U100">P_p</span>(<span class="mxinfo " id="T1:U19">3</span>,<span class="mxinfo " id="T1:U20">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">    <span class="mxinfo " id="T1:U21"><span class="var type1" id="S28T1U105">Ptb_p</span> = <span class="mxinfo " id="T1:U23"><span class="var type1" id="S23T2U107">P_p</span>(<span class="mxinfo " id="T1:U25">2</span>,<span class="mxinfo " id="T1:U26">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="mxinfo " id="T1:U27"><span class="var type1" id="S29T1U112">Ptt_p</span> = <span class="mxinfo " id="T1:U29"><span class="var type1" id="S23T2U114">P_p</span>(<span class="mxinfo " id="T1:U31">2</span>,<span class="mxinfo " id="T1:U32">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T1:U33"><span class="var type1" id="S30T1U119">Pwb_p</span> = <span class="mxinfo " id="T1:U35"><span class="var type1" id="S23T2U121">P_p</span>(<span class="mxinfo " id="T1:U37">1</span>,<span class="mxinfo " id="T1:U38">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line">    <span class="mxinfo " id="T1:U39"><span class="var type1" id="S31T1U126">Pwt_p</span> = <span class="mxinfo " id="T1:U41"><span class="var type1" id="S23T2U128">P_p</span>(<span class="mxinfo " id="T1:U43">1</span>,<span class="mxinfo " id="T1:U44">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T1:U45"><span class="var type1" id="S32T1U133">Pww_p</span> = <span class="mxinfo " id="T1:U47"><span class="var type1" id="S23T2U135">P_p</span>(<span class="mxinfo " id="T1:U49">1</span>,<span class="mxinfo " id="T1:U50">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23">23</a></span><span class="line">    <span class="var type0" id="S33T0U140">Pbb</span> = <span class="var type1" id="S27T1U142">Pbb_p</span> + <span class="var type0" id="S26T0U144"><span class="message error" id="M17F2C">T</span></span>*<span class="var type0" id="S25T0U145">qb</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24">24</a></span><span class="line">    <span class="var type0" id="S34T0U148">Ptb</span> = <span class="var type0" id="S26T0U151"><span class="message error" id="M18F2C">T</span></span>*<span class="var type0" id="S30T0U152">Pwb_p</span>+<span class="var type0" id="S28T0U153">Ptb_p</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25">25</a></span><span class="line">    <span class="var type0" id="S35T0U156">Ptt</span> = <span class="var type1" id="S29T1U160">Ptt_p</span> + <span class="var type0" id="S26T0U163"><span class="message error" id="M19F2C">T</span></span>^2*<span class="var type0" id="S32T0U165">Pww_p</span> + 2*<span class="var type0" id="S26T0U169">T</span>*<span class="var type0" id="S31T0U170">Pwt_p</span> + <span class="var type0" id="S26T0U174">T</span>^3*<span class="var type0" id="S24T0U176">qw</span>/3;</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T1:U53"><span class="var type1" id="S36T1U180">Pwb</span> = <span class="var type1" id="S30T1U181">Pwb_p</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27">27</a></span><span class="line">    <span class="var type0" id="S37T0U184">Pwt</span> = <span class="var type0" id="S26T0U188"><span class="message error" id="M20F2C">T</span></span>*<span class="var type0" id="S32T0U189">Pww_p</span> + <span class="var type0" id="S31T0U190">Pwt_p</span> + 1/2*<span class="var type0" id="S26T0U197">T</span>^2*<span class="var type0" id="S24T0U199">qw</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28">28</a></span><span class="line">    <span class="var type0" id="S38T0U202">Pww</span> = <span class="var type1" id="S32T1U204">Pww_p</span> + <span class="var type0" id="S26T0U206"><span class="message error" id="M21F2C">T</span></span>*<span class="var type0" id="S24T0U207">qw</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29">29</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30">30</a></span><span class="line">    <span class="var type0" id="S19T0U210">P</span> = [<span class="var type0" id="S38T0U213"><span class="message error" id="M22F2C">Pww</span></span>, <span class="var type0" id="S37T0U214">Pwt</span>, <span class="var type0" id="S36T0U215">Pwb</span>; <span class="var type0" id="S37T0U217">Pwt</span>, <span class="var type0" id="S35T0U218">Ptt</span>, <span class="var type0" id="S34T0U219">Ptb</span>; <span class="var type0" id="S36T0U221">Pwb</span>, <span class="var type0" id="S34T0U222">Ptb</span>, <span class="var type0" id="S33T0U223">Pbb</span>];</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31">31</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32">32</a></span><span class="line"></span></span>
</pre>
