<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50"> 50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51"> 51</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S54T8U466">Theta</span>, <span class="var type1" id="S55T8U467">dTheta</span>, <span class="var type1" id="S56T9U468">Bias</span>, <span class="var type1" id="S57T10U469">P</span>] = GyroCorrection(<span class="var type1" id="S58T1U472">Theta_p</span>, <span class="var type1" id="S59T1U473">dTheta_p</span>, <span class="var type1" id="S60T2U474">Bias_p</span>, <span class="var type1" id="S61T3U475">P_p</span>, <span class="var type1" id="S62T1U476">yw</span>, <span class="var type1" id="S63T5U477">rw</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52"> 52</a></span><span class="line">    <span class="mxinfo " id="T7:U11"><span class="var type1" id="S64T30U480">fm</span> = <span class="mxinfo " id="T7:U13"><span class="fcn" id="F2N10:B482">get_fimath</span>()</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53"> 53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54"> 54</a></span><span class="line">    <span class="keyword">global</span> <span class="var type0" id="S66T0U484">T</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55"> 55</a></span><span class="line">    <span class="mxinfo " id="T48:U14"><span class="var type1" id="S67T48U487">Pbb_p</span> = <span class="mxinfo " id="T48:U16">fi(<span class="mxinfo " id="T27:U17"><span class="var type1" id="S61T3U491">P_p</span>(<span class="mxinfo " id="T14:U19">3</span>,<span class="mxinfo " id="T14:U20">3</span>)</span>, 0, 16, 13, <span class="var type1" id="S64T30U497">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56"> 56</a></span><span class="line">    <span class="mxinfo " id="T9:U22"><span class="var type1" id="S69T9U500">Ptb_p</span> = <span class="mxinfo " id="T9:U24">fi(<span class="mxinfo " id="T27:U25"><span class="var type1" id="S61T3U504">P_p</span>(<span class="mxinfo " id="T14:U27">2</span>,<span class="mxinfo " id="T14:U28">3</span>)</span>, 1, 16, 9, <span class="var type1" id="S64T30U510">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57"> 57</a></span><span class="line">    <span class="mxinfo " id="T51:U30"><span class="var type1" id="S70T51U513">Ptt_p</span> = <span class="mxinfo " id="T51:U32">fi(<span class="mxinfo " id="T27:U33"><span class="var type1" id="S61T3U517">P_p</span>(<span class="mxinfo " id="T14:U35">2</span>,<span class="mxinfo " id="T14:U36">2</span>)</span>, 0, 16, 6, <span class="var type1" id="S64T30U523">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58"> 58</a></span><span class="line">    <span class="mxinfo " id="T54:U38"><span class="var type1" id="S71T54U526">Pwb_p</span> = <span class="mxinfo " id="T54:U40">fi(<span class="mxinfo " id="T27:U41"><span class="var type1" id="S61T3U530">P_p</span>(<span class="mxinfo " id="T14:U43">1</span>,<span class="mxinfo " id="T14:U44">3</span>)</span>, 1, 16, 12, <span class="var type1" id="S64T30U536">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59"> 59</a></span><span class="line">    <span class="mxinfo " id="T57:U46"><span class="var type1" id="S72T57U539">Pwt_p</span> = <span class="mxinfo " id="T57:U48">fi(<span class="mxinfo " id="T27:U49"><span class="var type1" id="S61T3U543">P_p</span>(<span class="mxinfo " id="T14:U51">1</span>,<span class="mxinfo " id="T14:U52">2</span>)</span>, 0, 16, 10, <span class="var type1" id="S64T30U549">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60"> 60</a></span><span class="line">    <span class="mxinfo " id="T48:U54"><span class="var type1" id="S73T48U552">Pww_p</span> = <span class="mxinfo " id="T48:U56">fi(<span class="mxinfo " id="T27:U57"><span class="var type1" id="S61T3U556">P_p</span>(<span class="mxinfo " id="T14:U59">1</span>,<span class="mxinfo " id="T14:U60">1</span>)</span>, 0, 16, 13, <span class="var type1" id="S64T30U562">fm</span>)</span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61"> 61</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62"> 62</a></span><span class="line">    <span class="comment">%% Kalman Gain Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63"> 63</a></span><span class="line">    <span class="mxinfo " id="T175:U62"><span class="var type1" id="S74T175U565">kw</span> = <span class="mxinfo " id="T175:U64">fi(<span class="mxinfo " id="T174:U65"><span class="fcn" id="F458N7:B569">fi_div</span>((<span class="mxinfo " id="T143:U66"><span class="var type1" id="S73T48U572">Pww_p</span> + <span class="var type1" id="S71T54U573">Pwb_p</span></span>), (<span class="mxinfo " id="T159:U69"><span class="mxinfo " id="T155:U70"><span class="mxinfo " id="T152:U71"><span class="var type1" id="S73T48U578">Pww_p</span> + <span class="mxinfo " id="T149:U73"><span class="mxinfo " id="T146:U74">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U586">fm</span>)</span>*<span class="var type1" id="S71T54U587">Pwb_p</span></span></span> + <span class="var type1" id="S67T48U588">Pbb_p</span></span> + <span class="mxinfo " id="T5:U78"><span class="fcn" id="F386N7:B590">fi_div</span>(<span class="var type1" id="S63T5U591">rw</span>, <span class="var type2" id="S66T12V1U592">T</span>)</span></span>))</span>, 0, 16, 16, <span class="var type1" id="S64T30U596">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64"> 64</a></span><span class="line">    <span class="mxinfo " id="T182:U82"><span class="var type1" id="S76T182U599">kt</span> = <span class="mxinfo " id="T182:U84">fi(<span class="mxinfo " id="T174:U85"><span class="fcn" id="F486N7:B603">fi_div</span>((<span class="mxinfo " id="T178:U86"><span class="var type1" id="S72T57U606">Pwt_p</span> + <span class="var type1" id="S69T9U607">Ptb_p</span></span>), (<span class="mxinfo " id="T159:U89"><span class="mxinfo " id="T155:U90"><span class="mxinfo " id="T152:U91"><span class="var type1" id="S73T48U612">Pww_p</span> + <span class="mxinfo " id="T149:U93"><span class="mxinfo " id="T146:U94">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U620">fm</span>)</span>*<span class="var type1" id="S71T54U621">Pwb_p</span></span></span> + <span class="var type1" id="S67T48U622">Pbb_p</span></span> + <span class="mxinfo " id="T5:U98"><span class="fcn" id="F386N7:B624">fi_div</span>(<span class="var type1" id="S63T5U625">rw</span>, <span class="var type1" id="S66T12U626">T</span>)</span></span>))</span>, 1, 16, 16, <span class="var type1" id="S64T30U630">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65"> 65</a></span><span class="line">    <span class="mxinfo " id="T185:U102"><span class="var type1" id="S77T185U633">kb</span> = <span class="mxinfo " id="T185:U104">fi(<span class="mxinfo " id="T174:U105"><span class="fcn" id="F458N7:B637">fi_div</span>((<span class="mxinfo " id="T143:U106"><span class="var type1" id="S71T54U640">Pwb_p</span> + <span class="var type1" id="S67T48U641">Pbb_p</span></span>), (<span class="mxinfo " id="T159:U109"><span class="mxinfo " id="T155:U110"><span class="mxinfo " id="T152:U111"><span class="var type1" id="S73T48U646">Pww_p</span> + <span class="mxinfo " id="T149:U113"><span class="mxinfo " id="T146:U114">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U654">fm</span>)</span>*<span class="var type1" id="S71T54U655">Pwb_p</span></span></span> + <span class="var type1" id="S67T48U656">Pbb_p</span></span> + <span class="mxinfo " id="T5:U118"><span class="fcn" id="F386N7:B658">fi_div</span>(<span class="var type1" id="S63T5U659">rw</span>, <span class="var type1" id="S66T12U660">T</span>)</span></span>))</span>, 0, 16, 20, <span class="var type1" id="S64T30U664">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66"> 66</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67"> 67</a></span><span class="line">    <span class="comment">%% State Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68"> 68</a></span><span class="line">    <span class="mxinfo " id="T8:U122"><span class="var type1" id="S55T8U667">dTheta</span> = <span class="mxinfo " id="T8:U124">fi(<span class="mxinfo " id="T197:U125"><span class="var type1" id="S59T1U671">dTheta_p</span> + <span class="mxinfo " id="T194:U127"><span class="var type1" id="S74T175U673">kw</span>*(<span class="mxinfo " id="T191:U129"><span class="mxinfo " id="T188:U130"><span class="var type1" id="S62T1U677">yw</span>-<span class="var type1" id="S59T1U678">dTheta_p</span></span>-<span class="var type1" id="S60T2U679">Bias_p</span></span>)</span></span>, 1, 16, 4, <span class="var type1" id="S64T30U683">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69"> 69</a></span><span class="line">    <span class="mxinfo " id="T8:U135"><span class="var type1" id="S54T8U686">Theta</span> =  <span class="mxinfo " id="T8:U137">fi(<span class="mxinfo " id="T197:U138"><span class="var type1" id="S58T1U690">Theta_p</span>  + <span class="mxinfo " id="T194:U140"><span class="var type1" id="S76T182U692">kt</span>*(<span class="mxinfo " id="T191:U142"><span class="mxinfo " id="T188:U143"><span class="var type1" id="S62T1U696">yw</span>-<span class="var type1" id="S59T1U697">dTheta_p</span></span>-<span class="var type1" id="S60T2U698">Bias_p</span></span>)</span></span>, 1, 16, 4, <span class="var type1" id="S64T30U702">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70"> 70</a></span><span class="line">    <span class="mxinfo " id="T9:U148"><span class="var type1" id="S56T9U705">Bias</span> =   <span class="mxinfo " id="T9:U150">fi(<span class="mxinfo " id="T203:U151"><span class="var type1" id="S60T2U709">Bias_p</span> + <span class="mxinfo " id="T200:U153"><span class="var type1" id="S77T185U711">kb</span>*(<span class="mxinfo " id="T191:U155"><span class="mxinfo " id="T188:U156"><span class="var type1" id="S62T1U715">yw</span>-<span class="var type1" id="S59T1U716">dTheta_p</span></span>-<span class="var type1" id="S60T2U717">Bias_p</span></span>)</span></span>, 1, 16, 9, <span class="var type1" id="S64T30U721">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71"> 71</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72"> 72</a></span><span class="line">    <span class="comment">%% Covariance Update</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,73" id="srcline73"> 73</a></span><span class="line">    <span class="mxinfo " id="T48:U161"><span class="var type1" id="S78T48U724">Pww</span> = <span class="mxinfo " id="T48:U163">fi(<span class="mxinfo " id="T243:U164"><span class="mxinfo " id="T234:U165"><span class="mxinfo " id="T228:U166"><span class="mxinfo " id="T216:U167"><span class="mxinfo " id="T213:U168">(<span class="mxinfo " id="T209:U169"><span class="mxinfo " id="T206:U170"><span class="fcn" id="F558N8:B735">fi_signed</span>(<span class="var type1" id="S74T175U736">kw</span>)</span> - <span class="mxinfo " id="T146:U172">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U743">fm</span>)</span></span>)^2</span>*<span class="var type1" id="S73T48U745">Pww_p</span></span> + <span class="mxinfo " id="T225:U175">(<span class="mxinfo " id="T222:U176"><span class="mxinfo " id="T219:U177"><span class="mxinfo " id="T146:U178">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U756">fm</span>)</span>*<span class="var type1" id="S74T175U757">kw</span></span>*(<span class="mxinfo " id="T209:U181"><span class="mxinfo " id="T206:U182"><span class="fcn" id="F558N8:B761">fi_signed</span>(<span class="var type1" id="S74T175U762">kw</span>)</span> - <span class="mxinfo " id="T146:U184">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U769">fm</span>)</span></span>)</span>)*<span class="var type1" id="S71T54U770">Pwb_p</span></span></span> + <span class="mxinfo " id="T231:U187"><span class="mxinfo " id="T97:U188"><span class="var type1" id="S74T175U773">kw</span>^2</span>*<span class="var type1" id="S67T48U775">Pbb_p</span></span></span> + <span class="mxinfo " id="T237:U191"><span class="fcn" id="F673N7:B777">fi_div</span>((<span class="mxinfo " id="T237:U192"><span class="mxinfo " id="T97:U193"><span class="var type1" id="S74T175U781">kw</span>^2</span>*<span class="var type1" id="S63T5U783">rw</span></span>), <span class="var type1" id="S66T12U784">T</span>)</span></span>, 0, 16, 13, <span class="var type1" id="S64T30U788">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,74" id="srcline74"> 74</a></span><span class="line">    <span class="mxinfo " id="T57:U198"><span class="var type1" id="S80T57U791">Pwt</span> = <span class="mxinfo " id="T57:U200">fi(<span class="mxinfo " id="T292:U201"><span class="mxinfo " id="T283:U202"><span class="mxinfo " id="T277:U203"><span class="mxinfo " id="T270:U204"><span class="mxinfo " id="T258:U205"><span class="mxinfo " id="T249:U206">(<span class="mxinfo " id="T246:U207"><span class="var type1" id="S76T182U802">kt</span>*(<span class="mxinfo " id="T209:U209"><span class="mxinfo " id="T206:U210"><span class="fcn" id="F558N8:B806">fi_signed</span>(<span class="var type1" id="S74T175U807">kw</span>)</span> - <span class="mxinfo " id="T146:U212">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U814">fm</span>)</span></span>)</span>)*<span class="var type1" id="S73T48U815">Pww_p</span></span> + <span class="mxinfo " id="T255:U215">(<span class="mxinfo " id="T252:U216"><span class="mxinfo " id="T146:U217">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U825">fm</span>)</span> - <span class="var type1" id="S74T175U826">kw</span></span>)*<span class="var type1" id="S72T57U827">Pwt_p</span></span></span> + <span class="mxinfo " id="T267:U221">(<span class="mxinfo " id="T264:U222"><span class="mxinfo " id="T261:U223"><span class="var type1" id="S76T182U832">kt</span>*<span class="var type1" id="S74T175U833">kw</span></span> + <span class="mxinfo " id="T246:U226"><span class="var type1" id="S76T182U835">kt</span>*(<span class="mxinfo " id="T209:U228"><span class="mxinfo " id="T206:U229"><span class="fcn" id="F558N8:B839">fi_signed</span>(<span class="var type1" id="S74T175U840">kw</span>)</span> - <span class="mxinfo " id="T146:U231">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U847">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T54U848">Pwb_p</span></span></span> + <span class="mxinfo " id="T274:U234">(<span class="mxinfo " id="T206:U235"><span class="fcn" id="F749N9:B852">fi_uminus</span>(<span class="var type1" id="S74T175U853">kw</span>)</span>)*<span class="var type1" id="S69T9U854">Ptb_p</span></span></span> + <span class="mxinfo " id="T280:U238">(<span class="mxinfo " id="T261:U239"><span class="var type1" id="S76T182U858">kt</span>*<span class="var type1" id="S74T175U859">kw</span></span>)*<span class="var type1" id="S67T48U860">Pbb_p</span></span></span> + <span class="mxinfo " id="T286:U243"><span class="fcn" id="F788N7:B862">fi_div</span>((<span class="mxinfo " id="T286:U244"><span class="mxinfo " id="T261:U245"><span class="var type1" id="S76T182U866">kt</span>*<span class="var type1" id="S74T175U867">kw</span></span>*<span class="var type1" id="S63T5U868">rw</span></span>), <span class="var type1" id="S66T12U869">T</span>)</span></span>, 0, 16, 10, <span class="var type1" id="S64T30U873">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,75" id="srcline75"> 75</a></span><span class="line">    <span class="mxinfo " id="T54:U251"><span class="var type1" id="S82T54U876">Pwb</span> = <span class="mxinfo " id="T54:U253">fi(<span class="mxinfo " id="T331:U254"><span class="mxinfo " id="T325:U255"><span class="mxinfo " id="T316:U256"><span class="mxinfo " id="T298:U257">(<span class="mxinfo " id="T295:U258"><span class="var type1" id="S77T185U885">kb</span>*(<span class="mxinfo " id="T209:U260"><span class="mxinfo " id="T206:U261"><span class="fcn" id="F558N8:B889">fi_signed</span>(<span class="var type1" id="S74T175U890">kw</span>)</span> - <span class="mxinfo " id="T146:U263">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U897">fm</span>)</span></span>)</span>)*<span class="var type1" id="S73T48U898">Pww_p</span></span> + <span class="mxinfo " id="T313:U266">(<span class="mxinfo " id="T310:U267"><span class="mxinfo " id="T120:U268"><span class="var type1" id="S77T185U903">kb</span>*<span class="var type1" id="S74T175U904">kw</span></span> + <span class="mxinfo " id="T307:U271">(<span class="mxinfo " id="T304:U272"><span class="mxinfo " id="T301:U273"><span class="fcn" id="F820N8:B909">fi_signed</span>(<span class="var type1" id="S77T185U910">kb</span>)</span> - <span class="mxinfo " id="T146:U275">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U917">fm</span>)</span></span>)*(<span class="mxinfo " id="T209:U277"><span class="mxinfo " id="T206:U278"><span class="fcn" id="F558N8:B921">fi_signed</span>(<span class="var type1" id="S74T175U922">kw</span>)</span> - <span class="mxinfo " id="T146:U280">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U929">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T54U930">Pwb_p</span></span></span> + <span class="mxinfo " id="T322:U283">(<span class="mxinfo " id="T319:U284"><span class="var type1" id="S74T175U934">kw</span>*(<span class="mxinfo " id="T304:U286"><span class="mxinfo " id="T301:U287"><span class="fcn" id="F820N8:B938">fi_signed</span>(<span class="var type1" id="S77T185U939">kb</span>)</span> - <span class="mxinfo " id="T146:U289">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U946">fm</span>)</span></span>)</span>)*<span class="var type1" id="S67T48U947">Pbb_p</span></span></span> + <span class="mxinfo " id="T328:U292"><span class="fcn" id="F889N7:B949">fi_div</span>((<span class="mxinfo " id="T328:U293"><span class="mxinfo " id="T120:U294"><span class="var type1" id="S77T185U953">kb</span>*<span class="var type1" id="S74T175U954">kw</span></span>*<span class="var type1" id="S63T5U955">rw</span></span>), <span class="var type1" id="S66T12U956">T</span>)</span></span>, 1, 16, 12, <span class="var type1" id="S64T30U960">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,76" id="srcline76"> 76</a></span><span class="line">    <span class="mxinfo " id="T51:U300"><span class="var type1" id="S83T51U963">Ptt</span> = <span class="mxinfo " id="T51:U302">fi(<span class="mxinfo " id="T292:U303"><span class="mxinfo " id="T283:U304"><span class="mxinfo " id="T277:U305"><span class="mxinfo " id="T270:U306"><span class="mxinfo " id="T352:U307"><span class="mxinfo " id="T343:U308"><span class="mxinfo " id="T280:U309"><span class="mxinfo " id="T261:U310"><span class="var type1" id="S76T182U974">kt</span>^2</span>*<span class="var type1" id="S73T48U976">Pww_p</span></span> + <span class="mxinfo " id="T340:U313">(<span class="mxinfo " id="T337:U314"><span class="mxinfo " id="T334:U315">fi(-2, 1, 8, 0, <span class="var type1" id="S64T30U987">fm</span>)</span>*<span class="var type1" id="S76T182U988">kt</span></span>)*<span class="var type1" id="S72T57U989">Pwt_p</span></span></span> + <span class="mxinfo " id="T349:U319">(<span class="mxinfo " id="T346:U320"><span class="mxinfo " id="T146:U321">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U999">fm</span>)</span>*<span class="mxinfo " id="T261:U323"><span class="var type1" id="S76T182U1001">kt</span>^2</span></span>)*<span class="var type1" id="S71T54U1003">Pwb_p</span></span></span> + <span class="var type1" id="S70T51U1004">Ptt_p</span></span> + <span class="mxinfo " id="T355:U327">(<span class="mxinfo " id="T337:U328"><span class="mxinfo " id="T334:U329">fi(-2, 1, 8, 0, <span class="var type1" id="S64T30U1015">fm</span>)</span>*<span class="var type1" id="S76T182U1016">kt</span></span>)*<span class="var type1" id="S69T9U1017">Ptb_p</span></span></span> + <span class="mxinfo " id="T280:U333"><span class="mxinfo " id="T261:U334"><span class="var type1" id="S76T182U1020">kt</span>^2</span>*<span class="var type1" id="S67T48U1022">Pbb_p</span></span></span> + <span class="mxinfo " id="T286:U337"><span class="fcn" id="F788N7:B1024">fi_div</span>((<span class="mxinfo " id="T286:U338"><span class="mxinfo " id="T261:U339"><span class="var type1" id="S76T182U1028">kt</span>^2</span>*<span class="var type1" id="S63T5U1030">rw</span></span>), <span class="var type1" id="S66T12U1031">T</span>)</span></span>, 0, 16, 6, <span class="var type1" id="S64T30U1035">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,77" id="srcline77"> 77</a></span><span class="line">    <span class="mxinfo " id="T9:U344"><span class="var type1" id="S84T9U1038">Ptb</span> = <span class="mxinfo " id="T9:U346">fi(<span class="mxinfo " id="T394:U347"><span class="mxinfo " id="T388:U348"><span class="mxinfo " id="T385:U349"><span class="mxinfo " id="T376:U350"><span class="mxinfo " id="T367:U351"><span class="mxinfo " id="T361:U352">(<span class="mxinfo " id="T358:U353"><span class="var type1" id="S77T185U1049">kb</span>*<span class="var type1" id="S76T182U1050">kt</span></span>)*<span class="var type1" id="S73T48U1051">Pww_p</span></span> + <span class="mxinfo " id="T364:U357">(<span class="mxinfo " id="T301:U358"><span class="fcn" id="F991N9:B1055">fi_uminus</span>(<span class="var type1" id="S77T185U1056">kb</span>)</span>)*<span class="var type1" id="S72T57U1057">Pwt_p</span></span></span> + <span class="mxinfo " id="T373:U361">(<span class="mxinfo " id="T370:U362"><span class="mxinfo " id="T358:U363"><span class="var type1" id="S77T185U1062">kb</span>*<span class="var type1" id="S76T182U1063">kt</span></span> + <span class="mxinfo " id="T319:U366"><span class="var type1" id="S76T182U1065">kt</span>*(<span class="mxinfo " id="T304:U368"><span class="mxinfo " id="T301:U369"><span class="fcn" id="F820N8:B1069">fi_signed</span>(<span class="var type1" id="S77T185U1070">kb</span>)</span> - <span class="mxinfo " id="T146:U371">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U1077">fm</span>)</span></span>)</span></span>)*<span class="var type1" id="S71T54U1078">Pwb_p</span></span></span> + <span class="mxinfo " id="T382:U374">(<span class="mxinfo " id="T379:U375"><span class="mxinfo " id="T146:U376">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U1088">fm</span>)</span> - <span class="var type1" id="S77T185U1089">kb</span></span>)*<span class="var type1" id="S69T9U1090">Ptb_p</span></span></span> + <span class="mxinfo " id="T322:U380">(<span class="mxinfo " id="T319:U381"><span class="var type1" id="S76T182U1094">kt</span>*(<span class="mxinfo " id="T304:U383"><span class="mxinfo " id="T301:U384"><span class="fcn" id="F820N8:B1098">fi_signed</span>(<span class="var type1" id="S77T185U1099">kb</span>)</span> - <span class="mxinfo " id="T146:U386">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U1106">fm</span>)</span></span>)</span>)*<span class="var type1" id="S67T48U1107">Pbb_p</span></span></span> + <span class="mxinfo " id="T391:U389"><span class="fcn" id="F1064N7:B1109">fi_div</span>((<span class="mxinfo " id="T391:U390"><span class="mxinfo " id="T358:U391"><span class="var type1" id="S77T185U1113">kb</span>*<span class="var type1" id="S76T182U1114">kt</span></span>*<span class="var type1" id="S63T5U1115">rw</span></span>), <span class="var type1" id="S66T12U1116">T</span>)</span></span>, 1, 16, 9, <span class="var type1" id="S64T30U1120">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,78" id="srcline78"> 78</a></span><span class="line">    <span class="mxinfo " id="T48:U397"><span class="var type1" id="S85T48U1123">Pbb</span> = <span class="mxinfo " id="T48:U399">fi(<span class="mxinfo " id="T427:U400"><span class="mxinfo " id="T421:U401"><span class="mxinfo " id="T412:U402"><span class="mxinfo " id="T400:U403"><span class="mxinfo " id="T397:U404"><span class="var type1" id="S77T185U1131">kb</span>^2</span>*<span class="var type1" id="S73T48U1133">Pww_p</span></span> + <span class="mxinfo " id="T409:U407">(<span class="mxinfo " id="T406:U408"><span class="mxinfo " id="T403:U409"><span class="mxinfo " id="T146:U410">fi(2, 0, 8, 0, <span class="var type1" id="S64T30U1144">fm</span>)</span>*<span class="var type1" id="S77T185U1145">kb</span></span>*(<span class="mxinfo " id="T304:U413"><span class="mxinfo " id="T301:U414"><span class="fcn" id="F820N8:B1149">fi_signed</span>(<span class="var type1" id="S77T185U1150">kb</span>)</span> - <span class="mxinfo " id="T146:U416">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U1157">fm</span>)</span></span>)</span>)*<span class="var type1" id="S71T54U1158">Pwb_p</span></span></span> + <span class="mxinfo " id="T418:U419"><span class="mxinfo " id="T415:U420">(<span class="mxinfo " id="T304:U421"><span class="mxinfo " id="T301:U422"><span class="fcn" id="F820N8:B1164">fi_signed</span>(<span class="var type1" id="S77T185U1165">kb</span>)</span> - <span class="mxinfo " id="T146:U424">fi(1, 0, 8, 0, <span class="var type1" id="S64T30U1172">fm</span>)</span></span>)^2</span>*<span class="var type1" id="S67T48U1174">Pbb_p</span></span></span> + <span class="mxinfo " id="T424:U427"><span class="fcn" id="F1164N7:B1176">fi_div</span>((<span class="mxinfo " id="T424:U428"><span class="mxinfo " id="T397:U429"><span class="var type1" id="S77T185U1180">kb</span>^2</span>*<span class="var type1" id="S63T5U1182">rw</span></span>), <span class="var type1" id="S66T12U1183">T</span>)</span></span>, 0, 16, 13, <span class="var type1" id="S64T30U1187">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,79" id="srcline79"> 79</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="1,80" id="srcline80"> 80</a></span><span class="line">    <span class="mxinfo " id="T10:U434"><span class="var type1" id="S57T10U1190">P</span> = <span class="mxinfo " id="T10:U436">fi(<span class="mxinfo " id="T10:U437">[<span class="mxinfo " id="T141:U438"><span class="mxinfo " id="T138:U439">fi(<span class="var type1" id="S78T48U1197">Pww</span>, 1, 16, 5, <span class="var type1" id="S64T30U1201">fm</span>)</span>, <span class="var type1" id="S80T57U1202">Pwt</span>, <span class="var type1" id="S82T54U1203">Pwb</span></span>; <span class="mxinfo " id="T141:U444"><span class="mxinfo " id="T138:U445">fi(<span class="var type1" id="S80T57U1207">Pwt</span>, 1, 16, 5, <span class="var type1" id="S64T30U1211">fm</span>)</span>, <span class="var type1" id="S83T51U1212">Ptt</span>, <span class="var type1" id="S84T9U1213">Ptb</span></span>; <span class="mxinfo " id="T142:U450"><span class="mxinfo " id="T9:U451">fi(<span class="var type1" id="S82T54U1217">Pwb</span>, 1, 16, 9, <span class="var type1" id="S64T30U1221">fm</span>)</span>, <span class="var type1" id="S84T9U1222">Ptb</span>, <span class="var type1" id="S85T48U1223">Pbb</span></span>]</span>, 1, 16, 5, <span class="var type1" id="S64T30U1227">fm</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,81" id="srcline81"> 81</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,82" id="srcline82"> 82</a></span><span class="line"></span></span>
</pre>
